apiVersion: resources.stuttgart-things.com/v1alpha1
kind: HarvesterVM
metadata:
  name: martin-kubernetes
  namespace: default
spec:
  providerConfigRef: harvester
  volume:
    pvcName: martin-kubernetes-root
    namespace: default
    storageClassName: longhorn-image-m5bh6
    storage: '40Gi'
    accessModes:
    - ReadWriteMany
    volumeMode: Block
    annotations:
      harvesterhci.io/imageId: default/image-m5bh6
  cloudInit:
    vmName: martin-kubernetes
    namespace: default
    hostname: martin
    domain: stuttgart-things.local
    timezone: Europe/Berlin
    packages:
    - curl
    packageUpdate: true
    packageUpgrade: false
    sshPasswordAuth: false
    disableRoot: true
  vm:
    runStrategy: RerunOnFailure
    evictionStrategy: LiveMigrateIfPossible
    terminationGracePeriodSeconds: 120
    os: ubuntu
    machineType: q35
    cpu:
      cores: 4
      sockets: 1
      threads: 1
    resources:
      memory: '4Gi'
      cpu: '4'
    disks:
    - name: rootdisk
      bus: virtio
    - name: cloudinitdisk
      bus: virtio
    networks:
    - name: default
      networkName: default/default
